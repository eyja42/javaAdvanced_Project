2023.11.15

实现了画面的绘制，用一个圆表示游戏角色，周围一个小圆表示武器。

角色就使用圆形图标表示了，地图中的墙使用ractangle类实现，虽然只能做出横平竖直的墙但是简单。

待实现：角色移动时以移动地图代替。



2023.11.16

**地图生成思路1：**
首先绘制一堆的正方形“房间”，然后将房间打通，每个房间至少与两个房间相连。
具体地，打通方式可以是在中间开条过道，可以是将左半或右半边墙面拆除，可以是整面拆掉。
地图周围留出半个正方形“房间”的空白。这些边缘区域使用相同的算法分隔。

**地图生成思路2：**
先将地图当作由大量地板拼接成的矩形处理，每个四块地板交接的地方视为一个标记。
在这些标记的位置随机地画十字形，这些十字形可大可小，但都不相交。
整个地图看上去比较空，但是又有分隔。



弓箭手大作战的地图都是设置死的，低级竞技场就是一堆十字障碍物分隔的方案；中级竞技场使用了斜角的墙体分隔，中央很空，但四周障碍较多。



2023.12.3

- 替换人物及武器贴图，且人物贴图会随着左右移动切换朝向（通过反转图片实现的）
- 实现武器攻击动画（只是动画！伤害逻辑还没做），武器随着鼠标朝向改变方向，左键会播放近战武器攻击效果；写了挥动型武器和刺击型两种攻击动画



接下来首先解决地图方面的问题。要求里有要求存取地图，准备用json写



2023.12.10

成功使用gson将json文件自动读取并构建Wall对象。之后写完敌人类之后可以套用。



2023.12.12

NIO selector实现网络通信是一整个技术栈，学习量比想象中还要大。其它功能可能都得大幅删减以保证ddl前能交出成品……今天都用在学习上了。



2023.12.16

修好了敌人在与玩家距离过近时，移动会出现问题，以及移动速度忽快忽慢的bug。



TODO（12.16）

完成敌人的攻击逻辑——**完成**

增加测试覆盖度至50%——**完成**

使用github actions运行构建过程和测试过程——**完成**

进度保存与恢复：添加一个开始界面，提供开始游戏/继续游戏两个选项，在中途退出游戏且位于游戏界面时自动保存信息——**完成**

网络通信



12.19

敌人攻击逻辑完成；将敌人ai中的一些判定逻辑移到了enemy类内，方便以后设计新敌人时重构



12.20

把玩家操作线程独立出来了；github actions的bug修了，maven包管理器配置好了，之前因为Raylib-J在maven主仓库里没有所以会报错

别的不修了，爱咋咋地



12.23

看完其他同学的展示感觉还是不能摆烂……爬回来写网络通信。

client和server能通信了——以类似“pingpong”的形式进行触发式游戏数据交换。

但是由于网络通信线程和游戏线程之间独立，所以网络同步过来的游戏世界数据并没有实际同步到游戏中。

为world对象加上`synchronized`关键字可能可以解决问题。



12.24

修完了网络通信的bug。这回彻底写完了。